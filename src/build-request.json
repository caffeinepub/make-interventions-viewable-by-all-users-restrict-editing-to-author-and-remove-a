{
  "kind": "build_request",
  "title": "Enable moving uploaded files between technical folders",
  "projectName": "Client Dossier",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a 'Move' action to each file in the TechnicalFileRow component that opens a folder selection dialog",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Je veux pouvoir deplacer les fichiers telechargé du dossier technique vers les differents dossiers crée"
        ]
      },
      "acceptanceCriteria": [
        "TechnicalFileRow displays a 'Move' button or menu item alongside existing download and delete actions",
        "Clicking 'Move' opens a dialog showing available destination folders",
        "Dialog excludes the current folder from destination options"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Create a folder selection dialog component that displays the technical folder hierarchy and allows selecting a destination folder",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Je veux pouvoir deplacer les fichiers telechargé du dossier technique vers les differents dossiers crée"
        ]
      },
      "acceptanceCriteria": [
        "Dialog shows all existing folders in the technical folder structure",
        "User can navigate through nested folders",
        "User can select a destination folder and confirm the move operation",
        "Dialog includes a cancel option"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement backend Motoko function to move a technical file from one folder path to another, preserving the file content and metadata",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Je veux pouvoir deplacer les fichiers telechargé du dossier technique vers les differents dossiers crée"
        ]
      },
      "acceptanceCriteria": [
        "Function accepts source file path, destination folder path, and client ID as parameters",
        "File is removed from source location and added to destination location",
        "File content (ExternalBlob) and metadata are preserved during the move",
        "Function returns success/error status",
        "Proper authorization checks ensure only users with appropriate permissions can move files"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Create useMoveFile React Query mutation hook that calls the backend move function and invalidates technical folder queries on success",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Je veux pouvoir deplacer les fichiers telechargé du dossier technique vers les differents dossiers crée"
        ]
      },
      "acceptanceCriteria": [
        "Hook accepts source path, destination path, and client ID",
        "On success, invalidates technical folder queries to refresh the file list",
        "Shows success toast notification when file is moved",
        "Shows error toast notification if move operation fails",
        "Follows the same pattern as existing useTechnicalFolder hooks"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Update TechnicalFolderPage to refresh the file list after a successful move operation",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Je veux pouvoir deplacer les fichiers telechargé du dossier technique vers les differents dossiers crée"
        ]
      },
      "acceptanceCriteria": [
        "File list automatically updates when a file is moved",
        "Moved file no longer appears in the source folder",
        "User remains on the current folder view after move operation",
        "Loading state is shown during the move operation"
      ]
    }
  ],
  "constraints": [
    "Maintain single-actor architecture in backend/main.mo",
    "Follow existing patterns in useTechnicalFolder.ts for new mutation hooks",
    "Do not modify read-only UI component sources in frontend/src/components/ui"
  ],
  "nonGoals": [
    "Moving multiple files at once",
    "Renaming files during the move operation",
    "Moving entire folders",
    "Undo/redo functionality for move operations"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}